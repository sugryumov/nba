import{e as l,j as n,A as T,f as i,a7 as C,m as p,K as g}from"./index.0fd3b217.js";import{G as _}from"./index.235e775b.js";import{u}from"./videoEventService.a09efb96.js";import{o as S,n as w,a4 as y}from"./index.59561127.js";import{a as m}from"./parseDate.baad7fa7.js";import{T as A}from"./Table.29fe64d9.js";import"./getScrollBarSize.5d5c88af.js";import"./TextArea.1bec283c.js";var M={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:t}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:e}}]}},name:"check-circle",theme:"twotone"};const N=M;var h=function(e,t){return n(T,{...i(i({},e),{},{ref:t,icon:N})})};h.displayName="CheckCircleTwoTone";const R=l.exports.forwardRef(h);var v={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:t}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:e}}]}},name:"close-circle",theme:"twotone"};const L=v;var E=function(e,t){return n(T,{...i(i({},e),{},{ref:t,icon:L})})};E.displayName="CloseCircleTwoTone";const D=l.exports.forwardRef(E),P=a=>a.Shot_Chart_Detail.map(e=>({actionType:e.ACTION_TYPE,eventType:e.EVENT_TYPE,gameDate:e.GAME_DATE,gameEventId:e.GAME_EVENT_ID,gameId:e.GAME_ID,gridType:e.GRID_TYPE,homeTeam:e.HTM,locX:e.LOC_X,locY:e.LOC_Y,minutesRemaining:e.MINUTES_REMAINING,period:e.PERIOD,playerId:e.PLAYER_ID,playerName:e.PLAYER_NAME,secondsRemaining:e.SECONDS_REMAINING,shotAttemptedFlag:Boolean(e.SHOT_ATTEMPTED_FLAG),shotDistance:e.SHOT_DISTANCE,shotMadeFlag:Boolean(e.SHOT_MADE_FLAG),shotType:e.SHOT_TYPE,shotZoneArea:e.SHOT_ZONE_AREA,shotZoneBasic:e.SHOT_ZONE_BASIC,shotZoneRange:e.SHOT_ZONE_RANGE,teamId:e.TEAM_ID,teamName:e.TEAM_NAME,visitorTeam:e.VTM})),x=C.injectEndpoints({endpoints:a=>({fetchShotChart:a.query({query:({gameId:e,teamId:t,playerId:r,type:o})=>({url:"/shot-chart",params:{gameId:e,teamId:t,playerId:r,type:o}}),transformResponse:e=>P(e)})})}),{useFetchShotChartQuery:O}=x,z=[{title:"Player",dataIndex:"playerName"},{title:"Player Type",dataIndex:"actionType"},{title:"Made",render:(a,e)=>{const{shotMadeFlag:t,eventType:r}=e;return p(g,{children:[t?n(R,{twoToneColor:"#52c41a"}):n(D,{twoToneColor:"crimson"}),n("span",{className:"shot-chart__table--type",children:r})]})}},{title:"Shot Type",dataIndex:"shotType"},{title:"Box Score",render:(a,e)=>{const{gameId:t,homeTeam:r,visitorTeam:o}=e,c=`${w.BOX_SCORE.PATH}?id=${t}`;return n(S,{to:c,children:`${o} @ ${r}`})}},{title:"Period",dataIndex:"period"},{title:"Time Remaining",render:(a,e)=>`${m(e.minutesRemaining)}:${m(e.secondsRemaining)}`},{title:"Shot Distance (FT)",dataIndex:"shotDistance"},{title:"Team",dataIndex:"teamName"}];const F=({data:a})=>{const[e,{data:t}]=u();l.exports.useEffect(()=>{if(a){const[o]=a;e({gameId:o.gameId,gameEventId:o.gameEventId})}},[a]);const r={onChange:(o,c)=>{const[s]=c;e({gameId:s.gameId,gameEventId:s.gameEventId})}};return p(g,{children:[n("video",{autoPlay:!0,controls:!0,src:t==null?void 0:t.videoUrl,poster:t==null?void 0:t.videoPoster,className:"shot-chart__table--video"}),n(A,{size:"small",rowKey:"gameEventId",dataSource:a,columns:z,pagination:!1,className:"table",rowSelection:{fixed:!0,type:"radio",defaultSelectedRowKeys:[a[0].gameEventId],...r}})]})},Z=()=>{const{search:a}=y(),e=new URLSearchParams(a).get("gameId"),t=new URLSearchParams(a).get("teamId"),r=new URLSearchParams(a).get("playerId"),o=new URLSearchParams(a).get("type"),{data:c,isFetching:s,isError:I}=O({gameId:e,teamId:t,playerId:r,type:o}),f=c==null?void 0:c.filter(d=>o.includes("M")?d.shotMadeFlag:d);return n(_,{data:c,isLoading:s,isError:I,children:n(F,{data:f})})};export{Z as default};
