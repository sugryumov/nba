import{a7 as b,m as s,j as y,e as u,K as v}from"./index.ad05f96f.js";import{G as S}from"./index.6fdb7622.js";import{S as D,c as g,C}from"./index.45a0728d.js";import{a4 as T}from"./index.b60b874e.js";import{P as i}from"./gameStatus.070917fe.js";const B=r=>{const{PlayByPlay:e}=r;return e.map(a=>({eventMsgAction:a.EVENTMSGACTIONTYPE,eventMsgType:a.EVENTMSGTYPE,eventNum:a.EVENTNUM,neutralDescription:a.NEUTRALDESCRIPTION,homeDescription:a.HOMEDESCRIPTION,pcTimeString:a.PCTIMESTRING,period:a.PERIOD,person1Type:a.PERSON1TYPE,person2Type:a.PERSON2TYPE,person3Type:a.PERSON3TYPE,player1Id:a.PLAYER1_ID,player1Name:a.PLAYER1_NAME,player1TeamAbbreviation:a.PLAYER1_TEAM_ABBREVIATION,player1TeamCity:a.PLAYER1_TEAM_CITY,player1TeamId:a.PLAYER1_TEAM_ID,player1TeamNickName:a.PLAYER1_TEAM_NICKNAME,player2Id:a.PLAYER2_ID,player2Name:a.PLAYER2_NAME,player2TeamAbbreviation:a.PLAYER2_TEAM_ABBREVIATION,player2TeamCity:a.PLAYER2_TEAM_CITY,player2TeamId:a.PLAYER2_TEAM_ID,player2TeamNickName:a.PLAYER2_TEAM_NICKNAME,player3Id:a.PLAYER3_ID,player3Name:a.PLAYER3_NAME,player3TeamAbbreviation:a.PLAYER3_TEAM_ABBREVIATION,player3TeamCity:a.PLAYER3_TEAM_CITY,player3TeamId:a.PLAYER3_TEAM_ID,player3TeamNickName:a.PLAYER3_TEAM_NICKNAME,score:a.SCORE,visitorDescription:a.VISITORDESCRIPTION,videoAvailableFlag:Boolean(a.VIDEO_AVAILABLE_FLAG)}))},O=b.injectEndpoints({endpoints:r=>({fetchPlayByPlay:r.query({query:e=>({url:`/play-by-play/${e}`}),transformResponse:e=>B(e)})})}),{useFetchPlayByPlayQuery:f}=O;const V=()=>{const{search:r}=T(),e=new URLSearchParams(r).get("hTeam"),a=new URLSearchParams(r).get("vTeam"),l=n=>s("div",{className:"play-by-play__header--team",children:[y(D,{name:n,width:40,height:40}),g[n]]});return s("div",{className:"play-by-play__header",children:[l(a),l(e)]})};const x=({item:r})=>{const{eventMsgType:e,period:a,person1Type:l,player1Name:n,player1Id:p,player2Name:A,player3Name:N,player3Id:m,person3Type:P,visitorDescription:d,homeDescription:I,pcTimeString:h,score:o}=r;if(e===i.startQuarter)return s("p",{className:"play-by-play__item--quarter",children:["Q",a," start"]});if(e===i.endQuarter)return s("p",{className:"play-by-play__item--quarter",children:["Q",a," end"]});const R=n||A||N,E=t=>t===4?m:p,_=(t,c)=>{const L=c?"play-by-play__item--home":"play-by-play__item--visitor",Y=c?"play-by-play__item--description":"play-by-play__item--description play-by-play__item--reverse",M=`https://cdn.nba.com/headshots/nba/latest/260x190/${E(c?P:l)}.png`;return y(v,{children:t&&s("div",{className:`play-by-play__item ${L}`,children:[s("div",{className:"play-by-play__item--info",children:[y("p",{children:h}),y("p",{className:"play-by-play__item--score",children:o&&o})]}),s("div",{className:Y,children:[R&&y("img",{className:"play-by-play__item--img",src:M}),y("span",{className:"play-by-play__item--text",children:t})]})]})})};return s(u.exports.Fragment,{children:[_(d,!1),_(I,!0)]},r.eventNum)};const $=()=>{const{search:r}=T(),e=new URLSearchParams(r).get("id"),{data:a,isFetching:l,isError:n}=f(e);return y(S,{data:a,isLoading:l,isError:n,children:s(C,{className:"play-by-play",children:[y(V,{}),a==null?void 0:a.map(p=>y(x,{item:p},p.eventNum))]})})};export{$ as default};
