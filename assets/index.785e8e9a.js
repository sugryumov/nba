import{e as d,j as n,A as g,f as l,a7 as R,a8 as M,K as _,m}from"./index.712579a5.js";import{q as x,S as L,G as D}from"./index.519d5fab.js";import{u as P}from"./videoEventService.fa250146.js";import{o as O,n as $,m as z,Q as F}from"./index.9b0f7788.js";import{a as p}from"./parseDate.c880c07f.js";import{T as G}from"./Table.eac1c3ad.js";var Y={icon:function(e,a){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:a}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:e}}]}},name:"check-circle",theme:"twotone"};const H=Y;var u=function(e,a){return n(g,{...l(l({},e),{},{ref:a,icon:H})})};u.displayName="CheckCircleTwoTone";const k=d.exports.forwardRef(u);var B={icon:function(e,a){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:a}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:e}}]}},name:"close-circle",theme:"twotone"};const V=B;var E=function(e,a){return n(g,{...l(l({},e),{},{ref:a,icon:V})})};E.displayName="CloseCircleTwoTone";const b=d.exports.forwardRef(E),U=t=>t.Shot_Chart_Detail.map(e=>({actionType:e.ACTION_TYPE,eventType:e.EVENT_TYPE,gameDate:e.GAME_DATE,gameEventId:e.GAME_EVENT_ID,gameId:e.GAME_ID,gridType:e.GRID_TYPE,homeTeam:e.HTM,locX:e.LOC_X,locY:e.LOC_Y,minutesRemaining:e.MINUTES_REMAINING,period:e.PERIOD,playerId:e.PLAYER_ID,playerName:e.PLAYER_NAME,secondsRemaining:e.SECONDS_REMAINING,shotAttemptedFlag:Boolean(e.SHOT_ATTEMPTED_FLAG),shotDistance:e.SHOT_DISTANCE,shotMadeFlag:Boolean(e.SHOT_MADE_FLAG),shotType:e.SHOT_TYPE,shotZoneArea:e.SHOT_ZONE_AREA,shotZoneBasic:e.SHOT_ZONE_BASIC,shotZoneRange:e.SHOT_ZONE_RANGE,teamId:e.TEAM_ID,teamName:e.TEAM_NAME,visitorTeam:e.VTM})),X=R.injectEndpoints({endpoints:t=>({fetchShotChart:t.query({query:({gameId:e,teamId:a,playerId:c,type:o})=>({url:"/shot-chart",params:{gameId:e,teamId:a,playerId:c,type:o}}),transformResponse:e=>U(e)})})}),{useFetchShotChartQuery:Z}=X;const j=()=>{const[t,{data:e,isFetching:a}]=P(),{video:c,info:o}=M(s=>s.shotChartReducer);d.exports.useEffect(()=>{c.gameEventId&&t({...c})},[c]);const r=`${o==null?void 0:o.playerName} ${o==null?void 0:o.minutesRemaining}' ${o==null?void 0:o.actionType}`;return n(_,{children:a?n(x,{size:"large",className:"shot-chart__video--spin"}):m("div",{className:"shot-chart__video",children:[n("p",{className:"shot-chart__video--title",children:r}),n("video",{autoPlay:!0,controls:!0,src:e==null?void 0:e.videoUrl,poster:e==null?void 0:e.videoPoster,className:"shot-chart__video--video"})]})})};const q=()=>n("div",{className:"shot-chart__map",children:n(L,{name:"floor",width:430})});const K=()=>m("div",{className:"short-chat__info",children:[n(j,{}),n(q,{})]}),Q=[{title:"Player",dataIndex:"playerName"},{title:"Player Type",dataIndex:"actionType"},{title:"Made",render:(t,e)=>{const{shotMadeFlag:a,eventType:c}=e;return m(_,{children:[a?n(k,{twoToneColor:"#52c41a"}):n(b,{twoToneColor:"crimson"}),n("span",{className:"shot-chart__table--type",children:c})]})}},{title:"Shot Type",dataIndex:"shotType"},{title:"Box Score",render:(t,e)=>{const{gameId:a,homeTeam:c,visitorTeam:o}=e,r=`${$.GAME_INFO.PATH}?gameId=${a}`;return n(O,{to:r,children:`${o} @ ${c}`})}},{title:"Period",dataIndex:"period"},{title:"Time Remaining",render:(t,e)=>`${p(e.minutesRemaining)}:${p(e.secondsRemaining)}`},{title:"Shot Distance (FT)",dataIndex:"shotDistance"},{title:"Team",dataIndex:"teamName"}];const J=({data:t})=>{const[e]=t,{gameId:a,gameEventId:c,playerName:o,minutesRemaining:r,actionType:s,locX:T,locY:h}=e,{setShotChartVideo:i}=z();return d.exports.useEffect(()=>{i({video:{gameId:a,gameEventId:c},info:{playerName:o,minutesRemaining:r,actionType:s,locX:T,locY:h}})},[t]),n(G,{size:"small",rowKey:"gameEventId",dataSource:t,columns:Q,pagination:!1,className:"table",rowSelection:{fixed:!0,type:"radio",defaultSelectedRowKeys:[c],...{onChange:(ee,I)=>{const[C]=I,{gameId:S,gameEventId:f,playerName:y,minutesRemaining:v,actionType:N,locX:w,locY:A}=C;i({video:{gameId:S,gameEventId:f},info:{playerName:y,minutesRemaining:v,actionType:N,locX:w,locY:A}})}}}})},se=()=>{const{search:t}=F(),e=new URLSearchParams(t).get("gameId"),a=new URLSearchParams(t).get("teamId"),c=new URLSearchParams(t).get("playerId"),o=new URLSearchParams(t).get("type"),{data:r,isFetching:s,isError:T}=Z({gameId:e,teamId:a,playerId:c,type:o}),h=r==null?void 0:r.filter(i=>o.includes("M")?i.shotMadeFlag:i);return m(D,{data:r,isLoading:s,isError:T,children:[n(K,{}),n(J,{data:h})]})};export{se as default};
