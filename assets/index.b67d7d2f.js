import{e as l,j as n,A as h,f as i,a7 as S,a8 as u,K as g,m as E}from"./index.0c632163.js";import{S as _,G as w}from"./index.c5327f76.js";import{u as y}from"./videoEventService.5b8f8a06.js";import{o as A,n as v,m as N,a4 as R}from"./index.829ab417.js";import{a as p}from"./parseDate.b6747cb5.js";import{T as M}from"./Table.fbe30bef.js";import"./getScrollBarSize.375cc97e.js";import"./TextArea.46ddc39c.js";var x={icon:function(e,a){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:a}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:e}}]}},name:"check-circle",theme:"twotone"};const L=x;var f=function(e,a){return n(h,{...i(i({},e),{},{ref:a,icon:L})})};f.displayName="CheckCircleTwoTone";const D=l.exports.forwardRef(f);var P={icon:function(e,a){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:a}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:e}}]}},name:"close-circle",theme:"twotone"};const O=P;var C=function(e,a){return n(h,{...i(i({},e),{},{ref:a,icon:O})})};C.displayName="CloseCircleTwoTone";const z=l.exports.forwardRef(C),F=t=>t.Shot_Chart_Detail.map(e=>({actionType:e.ACTION_TYPE,eventType:e.EVENT_TYPE,gameDate:e.GAME_DATE,gameEventId:e.GAME_EVENT_ID,gameId:e.GAME_ID,gridType:e.GRID_TYPE,homeTeam:e.HTM,locX:e.LOC_X,locY:e.LOC_Y,minutesRemaining:e.MINUTES_REMAINING,period:e.PERIOD,playerId:e.PLAYER_ID,playerName:e.PLAYER_NAME,secondsRemaining:e.SECONDS_REMAINING,shotAttemptedFlag:Boolean(e.SHOT_ATTEMPTED_FLAG),shotDistance:e.SHOT_DISTANCE,shotMadeFlag:Boolean(e.SHOT_MADE_FLAG),shotType:e.SHOT_TYPE,shotZoneArea:e.SHOT_ZONE_AREA,shotZoneBasic:e.SHOT_ZONE_BASIC,shotZoneRange:e.SHOT_ZONE_RANGE,teamId:e.TEAM_ID,teamName:e.TEAM_NAME,visitorTeam:e.VTM})),G=S.injectEndpoints({endpoints:t=>({fetchShotChart:t.query({query:({gameId:e,teamId:a,playerId:o,type:r})=>({url:"/shot-chart",params:{gameId:e,teamId:a,playerId:o,type:r}}),transformResponse:e=>F(e)})})}),{useFetchShotChartQuery:H}=G;const $=()=>{const[t,{data:e,isFetching:a}]=y(),{video:o}=u(r=>r.shotChartReducer);return l.exports.useEffect(()=>{o.gameEventId&&t({...o})},[o]),n(g,{children:a?n(_,{size:"large",className:"shot-chart__video--spin"}):n("video",{autoPlay:!0,controls:!0,src:e==null?void 0:e.videoUrl,poster:e==null?void 0:e.videoPoster,className:"shot-chart__video"})})},B=[{title:"Player",dataIndex:"playerName"},{title:"Player Type",dataIndex:"actionType"},{title:"Made",render:(t,e)=>{const{shotMadeFlag:a,eventType:o}=e;return E(g,{children:[a?n(D,{twoToneColor:"#52c41a"}):n(z,{twoToneColor:"crimson"}),n("span",{className:"shot-chart__table--type",children:o})]})}},{title:"Shot Type",dataIndex:"shotType"},{title:"Box Score",render:(t,e)=>{const{gameId:a,homeTeam:o,visitorTeam:r}=e,c=`${v.BOX_SCORE.PATH}?id=${a}`;return n(A,{to:c,children:`${r} @ ${o}`})}},{title:"Period",dataIndex:"period"},{title:"Time Remaining",render:(t,e)=>`${p(e.minutesRemaining)}:${p(e.secondsRemaining)}`},{title:"Shot Distance (FT)",dataIndex:"shotDistance"},{title:"Team",dataIndex:"teamName"}];const k=({data:t})=>{const[e]=t,{gameId:a,gameEventId:o}=e,{setShotChartVideo:r}=N();return l.exports.useEffect(()=>{r({gameId:a,gameEventId:o})},[t]),n(M,{size:"small",rowKey:"gameEventId",dataSource:t,columns:B,pagination:!1,className:"table",rowSelection:{fixed:!0,type:"radio",defaultSelectedRowKeys:[o],...{onChange:(T,d)=>{const[m]=d,{gameId:s,gameEventId:I}=m;r({gameId:s,gameEventId:I})}}}})},q=()=>{const{search:t}=R(),e=new URLSearchParams(t).get("gameId"),a=new URLSearchParams(t).get("teamId"),o=new URLSearchParams(t).get("playerId"),r=new URLSearchParams(t).get("type"),{data:c,isFetching:T,isError:d}=H({gameId:e,teamId:a,playerId:o,type:r}),m=c==null?void 0:c.filter(s=>r.includes("M")?s.shotMadeFlag:s);return E(w,{data:c,isLoading:T,isError:d,children:[n($,{}),n(k,{data:m})]})};export{q as default};
